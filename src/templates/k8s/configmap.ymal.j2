apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ service_name }}-config
  namespace: {{ namespace }}
  labels:
    app: {{ service_name }}
data:
  # Application configuration
  LOG_LEVEL: "{{ log_level | default('INFO') }}"
  APP_ENV: "{{ environment | default('production') }}"

  # Service endpoints
  {% if service_url %}
  SERVICE_URL: "{{ service_url }}"
  {% endif %}

  # Database configuration (non-sensitive)
  {% if database_host %}
  DATABASE_HOST: "{{ database_host }}"
  DATABASE_PORT: "{{ database_port | default('5432') }}"
  DATABASE_NAME: "{{ database_name }}"
  {% endif %}

  # Cache configuration
  {% if redis_host %}
  REDIS_HOST: "{{ redis_host }}"
  REDIS_PORT: "{{ redis_port | default('6379') }}"
  {% endif %}

  # Custom configuration
  {% if custom_config %}
  {% for key, value in custom_config.items() %}
  {{ key }}: "{{ value }}"
  {% endfor %}
  {% endif %}
